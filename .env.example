# Canonical Environment Template (ProfilePerfectAI)
# This file defines required environment variables for the ProfilePerfectAI demo application.
# Do NOT commit real secrets. Populate a local .env.local or GitHub/CI secrets via Key Vault kv-mahum-shared-apps.
# Key Vault mapping pattern (suggested secret names):
#   kv-mahum-shared-apps: AZURE-OPENAI-API-KEY, AZURE-AI-KEY, AZURE-STORAGE-CONNECTION-STRING,
#   PG-PROFILEPERFECT-PASSWORD, PG-PROFILEPERFECT-USER, AZURE-SEARCH-API-KEY, STRIPE-SECRET-KEY, STRIPE-WEBHOOK-SECRET

# =============================
# Azure OpenAI Primary (shared-openai-eastus2)
# =============================
AZURE_OPENAI_ENDPOINT=https://shared-openai-eastus2.cognitiveservices.azure.com/
AZURE_OPENAI_API_KEY=<KV:AZURE-OPENAI-API-KEY>
# Standardized deployments
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-5.1-mini
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-small
AZURE_OPENAI_IMAGE_DEPLOYMENT=gpt-image-1-mini
AZURE_OPENAI_AUDIO_DEPLOYMENT=gpt-4o-mini-audio
AZURE_OPENAI_REALTIME_DEPLOYMENT=gpt-4o-mini-realtime

# Optional global OpenAI fallback (only used if Azure fails)
OPENAI_API_KEY=<OPTIONAL_GLOBAL_OPENAI_KEY>
OPENAI_BASE_URL=https://api.openai.com/v1

# =============================
# Azure AI (ancillary services via same cognitive resource)
# =============================
AZURE_AI_ENDPOINT=https://shared-openai-eastus2.cognitiveservices.azure.com/
AZURE_AI_KEY=<KV:AZURE-AI-KEY>

# =============================
# Azure AI Search (shared-search-standard-eastus2)
# =============================
AZURE_SEARCH_ENDPOINT=https://shared-search-standard-eastus2.search.windows.net
AZURE_SEARCH_API_KEY=<KV:AZURE-SEARCH-API-KEY>
AZURE_SEARCH_INDEX_NAME=profileperfect-headshots

# =============================
# Azure Storage (stmahumsharedapps)
# =============================
AZURE_STORAGE_ACCOUNT=stmahumsharedapps
AZURE_STORAGE_CONNECTION_STRING=<KV:AZURE-STORAGE-CONNECTION-STRING>
AZURE_STORAGE_CONTAINER=headshots
APP_BLOB_CONTAINER_UPLOADS=profileperfect-uploads
APP_BLOB_CONTAINER_GENERATED=profileperfect-generated

# =============================
# Postgres (pg-shared-apps-eastus2) - pgvector enabled
# =============================
PGHOST=pg-shared-apps-eastus2.postgres.database.azure.com
PGPORT=5432
PGDATABASE=profileperfect_db
PGUSER=profileperfect_app
PGPASSWORD=<KV:PG-PROFILEPERFECT-PASSWORD>
PGSSLMODE=require
# Unified URL for ORMs if needed
DATABASE_URL=postgresql://profileperfect_app:<KV:PG-PROFILEPERFECT-PASSWORD>@pg-shared-apps-eastus2.postgres.database.azure.com:5432/profileperfect_db?sslmode=require

# =============================
# Stripe (optional payments/credits)
# =============================
STRIPE_SECRET_KEY=<KV:STRIPE-SECRET-KEY>
STRIPE_WEBHOOK_SECRET=<KV:STRIPE-WEBHOOK-SECRET>

# =============================
# Application runtime
# =============================
APP_ENV=production
PUBLIC_APP_NAME=ProfilePerfect AI
# Canonical public URL (preferred DNS)
APP_BASE_URL=https://headshots.shtrial.com
LOG_LEVEL=info

# =============================
# Misc / Feature Flags (add as needed)
# =============================
FEATURE_IMAGE_TRAINING=true
FEATURE_REALTIME_VOICE_PREVIEW=true

# =============================
# Guidance
# =============================
# 1. Populate secrets locally via: pnpm dlx dotenv-vault pull (if using vault) or manual .env.local.
# 2. Set GitHub Actions secrets to same keys for CI/CD.
# 3. Ensure Key Vault secret names align with <KV:...> placeholders.
# 4. Do NOT rename variables without updating central sync script.
